(this["webpackJsonpmass-reservations"]=this["webpackJsonpmass-reservations"]||[]).push([[0],{478:function(e,t,n){},481:function(e,t){},483:function(e,t){},525:function(e,t){},526:function(e,t){},643:function(e,t,n){},729:function(e,t,n){},731:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n(2),r=n.n(s),i=n(40),c=n.n(i),o=n(28),l=n(29),u=n(30),d=n(31),p=n(192),j=n(50),h=n(37),b=n(5),f=n(740),O=n(741),m=n(748),g=n(742),y=n(751),x=n(747),v=n(362),C=n.n(v).a.create({baseURL:"http://www.reserve-stthomas.com/api"}),M=n(363),L="SET_USER",E="AUTH_FAILURE",S="LOGOUT",k=function(e,t){return{type:L,payload:{user:e,token:t}}},w=function(e){var t=e().auth.token,n={headers:{"Content-type":"application/json"}};return t&&(n.headers["auth-token"]=t),n},_="LOAD_LIST",I="LOAD_ERROR",N="MASS_PUBLISHING",R="MASS_PUBLISHED",D="PUBLISH_FAILED",A="MASS_DELETING",T="DELETE_SUCCESS",F="DELETE_FAILURE",G="DELETE_PENDING",H="DELETE_CANCELED",W="SET_FILTER",K=function(e){return{type:_,payload:e}},B=function(e){return{type:N,payload:e._id}},P=function(e){return{type:R,payload:e._id}},z=function(e){return{type:A,payload:e}},Y=function(e){return{type:T,payload:e}},V=function(e){var t=("0"+e.date.getMinutes()).slice(-2),n=e.date.getHours(),a=n>=12?"PM":"AM";return"".concat(n=n>12?n-12:n,":").concat(t," ").concat(a)},U=function(e){return"".concat(V(e)," mass on ").concat(e.date.toLocaleDateString())},J=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return this.props.loading?Object(a.jsxs)(f.a,{variant:this.props.variant,type:this.props.type,onClick:this.props.onClick,style:this.props.style,disabled:!0,children:[Object(a.jsx)(O.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),this.props.children]}):Object(a.jsx)(f.a,{variant:this.props.variant,onClick:this.props.onClick,type:this.props.type,style:this.props.style,children:this.props.children})}}]),n}(r.a.Component),q=(n(417),n(364)),Q=n.n(q);var X=function(e){return Object(a.jsx)(Q.a,{className:"form-control",selected:e.value,onChange:e.onChange})},Z=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadList()}},{key:"getTotalReservations",value:function(e){return e.reservations.map((function(e){return e.seats.length})).reduce((function(e,t){return e+t}),0)}},{key:"getExtraButtons",value:function(e){var t=this;if(this.props.authorized)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{style:{marginLeft:"18px",marginBottom:"6px"},variant:"info",onClick:function(){return t.props.history.push("/view/".concat(e._id))},children:"View"}),Object(a.jsx)(J,{variant:"info",style:{marginLeft:"18px",marginRight:"18px",marginBottom:"6px"},loading:this.props.publishing===e._id,onClick:function(){return t.props.publishMass(e)},children:e.published?"Hide":"Publish"}),Object(a.jsx)(f.a,{variant:"info",onClick:function(){return t.props.setDeletePending(e._id)},style:{marginBottom:"6px"},children:this.props.deleting===e._id?Object(a.jsx)(O.a,{animation:"border"}):"Delete"})]})}},{key:"getFilter",value:function(){var e=this;return this.props.authorized?Object(a.jsx)(m.a,{children:Object(a.jsxs)(m.a.Row,{children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{style:{marginRight:"6px"},children:"Start Date"}),Object(a.jsx)(X,{value:this.props.filter.startDate,onChange:function(t){t=new Date(t.setHours(0)),t=new Date(t.setMinutes(0)),e.props.setFilter(Object(b.a)(Object(b.a)({},e.props.filter),{},{startDate:t}))}})]}),Object(a.jsx)(m.a.Group,{children:Object(a.jsx)(m.a.Check,{label:"Published Only",style:{marginLeft:"10px"},value:this.props.filter.published,onChange:function(t){return e.props.setFilter(Object(b.a)(Object(b.a)({},e.props.filter),{},{published:!e.props.filter.published}))}})})]})}):null}},{key:"getContent",value:function(){var e=this;return null!==this.props.massList?(console.log(this.props.massList),this.props.massList.filter((function(t){return!(t.date<e.props.filter.startDate)&&(!!t.published||e.props.authorized&&!e.props.filter.published)})).sort((function(e,t){return e.date-t.date})).map((function(t){return Object(a.jsx)(g.a,{style:{justifyContent:"center"},children:Object(a.jsx)(y.a,{style:{width:"100%"},children:Object(a.jsxs)(y.a.Body,{children:[Object(a.jsx)(y.a.Title,{children:U(t)}),Object(a.jsxs)(y.a.Text,{children:[e.getTotalReservations(t)," seats reserved"]}),Object(a.jsx)($,{mass:t}),e.getExtraButtons(t)]})})},t._id)}))):this.props.error?Object(a.jsx)("h2",{children:"Failed to load masses"}):Object(a.jsxs)(g.a,{children:[Object(a.jsx)("h3",{style:{marginRight:"10px"},children:"Loading mass list"}),Object(a.jsx)(O.a,{animation:"border"})]})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"container",style:{marginTop:"15px",width:"80vw"},children:[Object(a.jsxs)(x.a,{size:"sm",show:this.props.displayDeleteModal,onHide:function(){return e.props.setDeleteCanceled()},children:[Object(a.jsx)(x.a.Header,{children:Object(a.jsx)(x.a.Title,{children:"Are you sure you want to delete this mass?"})}),Object(a.jsxs)(x.a.Footer,{children:[Object(a.jsx)(f.a,{onClick:function(){return e.props.deleteMass(e.props.deleting)},children:"Yes"}),Object(a.jsx)(f.a,{onClick:function(){return e.props.setDeleteCanceled()},children:"No"})]})]}),Object(a.jsx)(g.a,{children:this.getFilter()}),Object(a.jsx)(g.a,{style:{justifyContent:"center"},children:Object(a.jsx)("h3",{children:"Upcoming Masses"})}),Object(a.jsx)("hr",{}),this.getContent()]})}}]),n}(r.a.Component);function $(e){var t=Object(j.g)();return Object(a.jsx)(f.a,{variant:"info",onClick:function(){t.push("/mass/".concat(e.mass._id))},style:{marginBottom:"6px"},children:"Reserve Seats"})}var ee=Object(h.b)((function(e){return{massList:e.massList.massList,error:e.massList.error,publishing:e.massList.publishing,authorized:e.auth.isAuthenticated,displayDeleteModal:e.massList.displayDeleteModal,deleting:e.massList.deleting,filter:e.massList.filter}}),{loadList:function(){return function(e,t){C.get("/masses",w(t)).then((function(t){var n=t.data.map((function(e){return e.date=new Date(e.date),e}));e(K(n))})).catch((function(t){e({type:I})}))}},publishMass:function(e){return function(t,n){t(B(e)),C.patch("/masses/".concat(e._id),{published:!e.published},w(n)).then((function(){t(P(e))})).catch((function(){t({type:D})}))}},setDeletePending:function(e){return{type:G,payload:e}},setDeleteCanceled:function(){return{type:H}},deleteMass:function(e){return function(t,n){t(z(e)),C.delete("/masses/".concat(e),w(n)).then((function(){t(Y(e))})).catch((function(){t({type:F})}))}},setFilter:function(e){return{type:W,payload:e}}})(Z),te=n(367),ne=n(749);n(478);var ae=Object(h.b)((function(e){return{authorized:e.auth.isAuthenticated}}),{logoutUser:function(){return console.log("test"),{type:S}}})((function(e){return Object(a.jsxs)(ne.a,{className:"app-nav",expand:"lg",children:[Object(a.jsx)(ne.a.Brand,{href:"/",children:Object(a.jsx)("span",{className:"nav-text",children:"St. Thomas Reservations"})}),Object(a.jsx)(ne.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(ne.a.Collapse,{className:"justify-content-end",children:[Object(a.jsxs)(te.a,{className:"mr-auto",children:[Object(a.jsx)(te.a.Link,{href:"/",children:Object(a.jsx)("span",{className:"nav-text",children:"Mass List"})}),Object(a.jsx)(te.a.Link,{href:"/info",children:Object(a.jsx)("span",{className:"nav-text",children:"Information"})}),function(){if(e.authorized)return Object(a.jsx)(te.a.Link,{href:"/admin",children:Object(a.jsx)("span",{className:"nav-text",children:"Admin"})})}()]}),Object(a.jsx)(te.a,{className:"ml-auto",children:e.authorized?Object(a.jsx)(te.a.Link,{onClick:function(){return e.logoutUser()},children:Object(a.jsx)("span",{className:"nav-text",children:"Logout"})}):Object(a.jsx)(te.a.Link,{href:"/login",children:Object(a.jsx)("span",{className:"nav-text",children:"Login"})})})]})]})})),se=n(120),re=n.n(se),ie=n(368),ce=n(365),oe=n(743),le=n(744);function ue(e){var t="seat seat-"+e.status;return Object(a.jsx)("div",{className:t,onClick:function(t){return e.onClick(t)},onMouseEnter:e.mouseEnter,style:{color:e.highlight?"#5c34eb":"black"},children:e.value})}var de=function(e){var t=e.seats,n=e.seatClicked,s=e.seatMouseOver,r=e.selectedReservation;s||(s=function(){});var i=function(e){return t.filter((function(t,n){return Math.floor(n/325)===e})).map((function(t,i){var c=Math.abs(-12*e+12-i%13);return 0===c&&(c=String.fromCharCode(97+i/13),t="row-label"),Object(a.jsx)(ue,{value:c,status:t,onClick:function(t){return n(i+325*e,t)},mouseEnter:function(){return s(i+325*e)},highlight:null===r||void 0===r?void 0:r.seats.includes(i+325*e)},i)}))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(g.a,{style:{justifyContent:"center"},children:Object(a.jsx)("h4",{style:{textAlign:"center"},children:"Altar"})}),Object(a.jsx)(g.a,{children:Object(a.jsx)("br",{})}),Object(a.jsxs)(g.a,{className:"church",children:[Object(a.jsxs)(ce.a,{md:6,style:{justifyContent:"center"},children:[Object(a.jsx)("h4",{style:{textAlign:"center"},children:"Mary's Side"}),Object(a.jsx)("div",{className:"seats",children:i(0)})]}),Object(a.jsxs)(ce.a,{md:6,style:{justifyContent:"center"},children:[Object(a.jsx)("h4",{style:{textAlign:"center"},children:"Josephs's Side"}),Object(a.jsx)("div",{className:"seats",children:i(1)})]})]})]})},pe=n(45),je=n(76),he=25,be=13,fe=function(){for(var e=[],t=0;t<650;t++){var n=t<325?0:1;0===Math.abs(-12*n+12-t%13)?e.push("row-label"):e.push("available")}return e},Oe=function(e){if(!e)return null;var t=e.filter((function(e){return e<325})),n=e.filter((function(e){return e>=325}));return Object(a.jsxs)("div",{children:[ye(0,t),ye(1,n)]})},me=function(e){if(!e)return null;var t=e.filter((function(e){return e<325})),n=e.filter((function(e){return e>=325}));return Object(a.jsxs)(a.Fragment,{children:[ge(0,t),ge(1,n)]})},ge=function(e,t){if(t.length<1)return null;var n=0===e?"Mary's Side":"Joseph's Side",s={};t=0===e?t.sort((function(e,t){return t-e})):t.sort((function(e,t){return e-t}));var r,i=Object(pe.a)(t);try{for(i.s();!(r=i.n()).done;){var c=r.value;c-=e*be*he;var o=String.fromCharCode(97+c/be),l=Math.abs(-12*e+12-c%13);s[o]?s[o]+=", "+l:s[o]=""+l}}catch(u){i.e(u)}finally{i.f()}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(je.e,{style:{fontSize:"4mm",fontWeight:"heavy",marginBottom:"1mm",marginLeft:"2mm",marginTop:"2mm"},children:n}),Object.keys(s).sort().map((function(e){return Object(a.jsxs)(je.e,{style:{fontSize:"4mm",marginBottom:"1mm",marginLeft:"4mm"},children:["Row ",e,": ",s[e]]},e)}))]})},ye=function(e,t){if(t.length<1)return null;var n=0===e?"Mary's Side":"Joseph's Side",s={};t=t.sort(),0===e&&(t=t.reverse());var r,i=Object(pe.a)(t);try{for(i.s();!(r=i.n()).done;){var c=r.value;c-=e*be*he;var o=String.fromCharCode(97+c/be),l=Math.abs(-12*e+12-c%13);s[o]?s[o]+=", "+l:s[o]=""+l}}catch(u){i.e(u)}finally{i.f()}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("strong",{children:n}),Object(a.jsx)("br",{}),Object.keys(s).sort().map((function(e){return Object(a.jsxs)("span",{children:["Row ",e,": ",s[e],Object(a.jsx)("br",{})]},e)}))]})},xe=function(e){var t,n=fe(),a=Object(pe.a)(e.reservations);try{for(a.s();!(t=a.n()).done;){var s,r=t.value,i=Object(pe.a)(r.seats);try{for(i.s();!(s=i.n()).done;){var c=s.value;n[c]="reserved";for(var o=c;o<=c+3&&Math.floor(o/be)===Math.floor(c/be);o++)"available"===n[o]&&(n[o]="unavailable");for(var l=c;l>=c-3&&Math.floor(l/be)===Math.floor(c/be);l--)"available"===n[l]&&(n[l]="unavailable")}}catch(f){i.e(f)}finally{i.f()}}}catch(f){a.e(f)}finally{a.f()}var u,d=Object(pe.a)(e.configuration.seats);try{for(d.s();!(u=d.n()).done;){n[u.value]="unavailable"}}catch(f){d.e(f)}finally{d.f()}var p,j=Object(pe.a)(e.configuration.rows);try{for(j.s();!(p=j.n()).done;)for(var h=p.value,b=0;b<n.length;b++)Math.floor(b/be)===h&&(n[b]="unavailable")}catch(f){j.e(f)}finally{j.f()}return n},ve="SET_MASS",Ce="GET_MASS_ERRORS",Me="DISPLAY_FORM_ERRORS",Le="CONFIRM",Ee="RESERVE_PENDING",Se="DISPLAY_RECEIPT",ke="SELECT_SEAT",we="BACK",_e=function(e){return{type:ve,payload:e}},Ie=function(e){return{type:Ce,payload:e}},Ne=function(e){return{type:Me,payload:e}},Re=function(){return{type:Se}},De=function(){return{type:Ee}},Ae=(n(643),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleClick=function(e){s.props.setSeatSelected(e)},s.countSeats=function(){return s.props.seats.filter((function(e){return"selected"===e})).length},s.confirmReservation=function(){var e=Object(ie.a)(re.a.mark((function e(t){var n,a,r,i;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=s.state.firstName,a=s.state.lastName,r=s.props.seats,i={firstName:n,lastName:a,seats:r.map((function(e,t){return t})).filter((function(e){return"selected"===r[e]}))},s.props.saveReservation(s.props.match.params.id,i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.getComponent=function(){if("selection"===s.props.stage)return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(de,{seats:s.props.seats,seatClicked:s.handleClick}),Object(a.jsx)(g.a,{style:{marginTop:"8px"},children:Object(a.jsx)(ce.a,{md:6,children:Object(a.jsxs)("p",{children:["Total Selected: ",s.countSeats()]})})}),Object(a.jsx)(g.a,{style:{marginTop:"8px",marginBottom:"15px"},children:Object(a.jsxs)(ce.a,{md:6,children:[Object(a.jsx)(f.a,{onClick:function(){return s.props.history.push("/")},style:{marginRight:"8px"},children:"Back to menu"}),Object(a.jsx)(f.a,{onClick:function(){return s.props.confirm()},disabled:0===s.countSeats(),children:"Continue"})]})})]});if("input"===s.props.stage)return Object(a.jsxs)("div",{style:{marginLeft:"20px"},children:[Object(a.jsx)(g.a,{children:Object(a.jsx)("hr",{})}),Object(a.jsxs)(g.a,{children:[Object(a.jsx)("h4",{children:"Confirm Reservation"}),Object(a.jsx)("br",{})]}),Object(a.jsx)(g.a,{children:Object(a.jsxs)(m.a,{children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"First Name"}),Object(a.jsx)(m.a.Control,{type:"text",value:s.state.firstName,onChange:function(e){return s.setState({firstName:e.target.value})}})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Last Name"}),Object(a.jsx)(m.a.Control,{type:"text",value:s.state.lastName,onChange:function(e){return s.setState({lastName:e.target.value})}})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Email (optional)"}),Object(a.jsx)(m.a.Control,{type:"email"}),Object(a.jsx)(m.a.Text,{children:"This will be used to send you a confirmation email, but will not be saved."})]}),Object(a.jsx)(J,{variant:"primary",type:"submit",onClick:function(e){return s.confirmReservation(e)},loading:s.props.posting,children:"Confirm Reservation"}),Object(a.jsx)(f.a,{style:{marginLeft:"8px"},onClick:function(){return s.props.back()},children:"Cancel"}),Object(a.jsx)(m.a.Text,{children:Object(a.jsx)("span",{style:{color:"red"},children:s.props.postError})})]})})]});if("receipt"===s.props.stage){var e=s.props.seats.map((function(e,t){return t})).filter((function(e){return"selected"===s.props.seats[e]})).filter((function(e){return 0===Math.floor(e/325)})),t=s.props.seats.map((function(e,t){return t})).filter((function(e){return"selected"===s.props.seats[e]})).filter((function(e){return 1===Math.floor(e/325)}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{children:"Reservation Receipt"}),Object(a.jsx)(oe.a,{size:"sm",children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("h4",{children:"First name"})}),Object(a.jsx)("td",{children:Object(a.jsx)("h4",{children:s.state.firstName})})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("h4",{children:"Last Name"})}),Object(a.jsx)("td",{children:Object(a.jsx)("h4",{children:s.state.lastName})})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("h4",{children:"Mass Date"})}),Object(a.jsx)("td",{children:Object(a.jsx)("h4",{children:s.props.mass.date.toDateString()})})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("h4",{children:"Mass Time"})}),Object(a.jsx)("td",{children:Object(a.jsx)("h4",{children:V(s.props.mass)})})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("h4",{children:"Seats"})}),Object(a.jsxs)("td",{children:[ye(0,e),Object(a.jsx)("br",{}),ye(1,t),Object(a.jsx)("br",{})]})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)("h4",{children:"Reservation Time"})}),Object(a.jsx)("td",{children:Object(a.jsxs)("h4",{children:[(new Date).toLocaleTimeString()," on ",(new Date).toLocaleDateString()]})})]})]})})]})}},s.state={firstName:"",lastName:""},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getMass(this.props.match.params.id)}},{key:"render",value:function(){return null!==this.props.errorMessage?Object(a.jsx)(le.a,{children:Object(a.jsx)("h2",{children:this.props.errorMessage})}):null===this.props.mass?Object(a.jsxs)(g.a,{style:{marginTop:"20px",margin:0},children:[Object(a.jsx)("h3",{style:{marginRight:"10px"},children:"Loading mass"}),Object(a.jsx)(O.a,{animation:"border",role:"status",children:Object(a.jsx)("span",{className:"sr-only",children:"Loading..."})})]}):Object(a.jsxs)("div",{style:{margin:0,marginTop:"15px",marginLeft:"15px"},children:[Object(a.jsx)(g.a,{children:Object(a.jsxs)("h3",{style:{marginLeft:"16px"},children:["Reserve Seats for ",U(this.props.mass)]})}),this.getComponent()]})}}]),n}(r.a.Component)),Te=Object(h.b)((function(e){return{mass:e.mass.mass,seats:e.mass.seats,errorMessage:e.mass.errorMessage,stage:e.mass.stage,posting:e.mass.posting,postError:e.mass.postError}}),{getMass:function(e){return function(t,n){C.get("/masses/".concat(e),w(n)).then((function(e){var n=e.data;n.date=new Date(n.date),t(_e(n))})).catch((function(e){t(Ie(e.response.data.errorMessage))}))}},setSeatSelected:function(e){return{type:ke,payload:e}},confirm:function(){return{type:Le}},back:function(){return{type:we}},saveReservation:function(e,t){return function(n,a){n(De()),C.post("/masses/".concat(e,"/reserve"),t,w(a)).then((function(e){n(Re())})).catch((function(e){n(Ne(e.response.data.errorMessage))}))}}})(Ae),Fe=function(){return Object(a.jsx)("div",{children:"Information page"})},Ge="CONFIG_LIST_LOADED",He="CONFIG_SELECTED",We="CONFIG_BACK",Ke="CONFIG_POSTING",Be="CONFIG_POSTED",Pe="CONFIG_POST_ERROR",ze="CONFIG_SELECT_SEAT",Ye="CONFIG_SELECT_ROW",Ve="CONFIG_SET_NAME",Ue="CONFIG_DELETING",Je="CONFIG_DELETE",qe=function(){return function(e,t){C.get("/config",w(t)).then((function(t){e(Qe(t.data))})).catch((function(t){e(Xe(t.response.data.errorMessage))}))}},Qe=function(e){return{type:Ge,payload:e}},Xe=function(e){return{type:"CONFIG_LIST_ERROR",payload:e}},Ze=function(e){return{type:Pe,payload:e}},$e=function(e){return{type:Je,payload:e}},et=function(e){return{type:Ue,payload:e}},tt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).seatClicked=function(t,n){n.ctrlKey?e.props.selectRow(t):e.props.selectSeat(t)},e.onSubmit=function(t){t.preventDefault(),e.props.saveConfig(e.props.config)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return console.log(this.props.error),Object(a.jsxs)(m.a,{onSubmit:this.onSubmit,children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Configuration Name"}),Object(a.jsx)(m.a.Control,{type:"text",value:this.props.config.name,onChange:function(t){return e.props.setName(t.target.value)}}),Object(a.jsx)(m.a.Text,{children:Object(a.jsx)("span",{style:{color:"red"},children:this.props.error})})]}),Object(a.jsx)(de,{seats:this.props.seatMap,seatClicked:this.seatClicked}),Object(a.jsxs)("div",{style:{marginTop:"10px"},children:[Object(a.jsx)(J,{type:"submit",children:"Save"}),Object(a.jsx)(f.a,{variant:"primary",onClick:function(){return e.props.goBack()},style:{marginLeft:"10px"},children:"Cancel"})]})]})}}]),n}(r.a.Component),nt=Object(h.b)((function(e){return{config:e.admin.config.selectedConfig,seatMap:e.admin.config.seatMap,error:e.admin.config.errorMessage}}),{goBack:function(){return{type:We}},selectSeat:function(e){return{type:ze,payload:e}},selectRow:function(e){return{type:Ye,payload:e}},saveConfig:function(e){return function(t,n){t({type:Ke});var a={name:e.name,rows:e.rows,seats:e.seats};e._id&&(a.id=e._id),C.put("/config/",a,w(n)).then((function(){t({type:Be})})).catch((function(e){t(Ze(e.response.data.errorMessage))}))}},setName:function(e){return{type:Ve,payload:e}}})(tt),at=n(750),st=n(108),rt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadConfigList()}},{key:"getButtonContent",value:function(e){return this.props.deleting===e?Object(a.jsx)(O.a,{animation:"border"}):Object(a.jsx)(st.b,{})}},{key:"render",value:function(){var e=this;return this.props.configList?Object(a.jsxs)("div",{style:{marginRight:"20px"},children:[Object(a.jsx)("h3",{children:"Configurations"}),Object(a.jsx)(at.a,{children:this.props.configList.map((function(t){return Object(a.jsxs)(at.a.Item,{children:[Object(a.jsx)("h4",{children:t.name}),Object(a.jsx)(f.a,{variant:"info",onClick:function(){return e.props.setConfig(t)},children:Object(a.jsx)(st.a,{})}),Object(a.jsx)(f.a,{variant:"info",style:{marginLeft:"10px"},onClick:function(){return e.props.deleteConfig(t)},children:e.getButtonContent(t._id)})]},t._id)}))}),Object(a.jsx)(f.a,{variant:"primary",style:{marginTop:"20px",marginBott:"10px"},onClick:function(){return e.props.setConfig(null)},children:"Add Configuration"})]}):Object(a.jsxs)(g.a,{children:[Object(a.jsx)("h3",{style:{marginRight:"10px",marginLeft:"15px"},children:"Loading configurations"}),Object(a.jsx)(O.a,{animation:"border"})]})}}]),n}(r.a.Component),it=Object(h.b)((function(e){return{configList:e.admin.config.configList,deleting:e.admin.config.deleting}}),{loadConfigList:qe,setConfig:function(e){return{type:He,payload:e}},deleteConfig:function(e){return function(t,n){t(et(e._id)),C.delete("/config/".concat(e._id),w(n)).then((function(){t($e(e._id))})).catch((function(e){alert("Could not delete configuration")}))}}})(rt),ct=n(745),ot="MASS_SAVED",lt="MASS_SAVE_ERROR",ut="MASS_SAVING",dt="MASS_SET_DATE",pt="MASS_SET_CONFIG",jt="MASS_SET_PUBLISHED",ht="MASS_DONE",bt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={rawHours:"",rawMinutes:"",hoursInvalid:!1,minutesInvalid:!1,ampm:"am"},e.onSubmit=function(t){t.preventDefault();var n=parseInt(e.state.rawHours),a=parseInt(e.state.rawMinutes);if(isNaN(n)||isNaN(a))e.setState({hoursInvalid:isNaN(n),minutesInvalid:isNaN(a)});else{var s=n>=1&&n<=12,r=a>=0&&a<60;if(s&&r){e.setState({hoursInvalid:!1,minutesInvalid:!1,rawHours:e.state.rawHours.length<2?"0"+e.state.rawHours:e.state.rawHours,rawMinutes:e.state.rawMinutes.length<2?"0"+e.state.rawMinutes:e.state.rawMinutes}),n<12&&"pm"===e.state.ampm&&(n+=12),12===n&&"am"===e.state.ampm&&(n=0);var i=e.props.mass.date;i.setHours(n),i.setMinutes(a),e.props.setDate(i),e.props.mass.configurationId.length<1&&(e.props.mass.configurationId=e.props.configList[0]._id),e.props.saveMass(e.props.mass)}else e.setState({hoursInvalid:!s,minutesInvalid:!r})}},e.doneClick=function(){e.setState({rawMinutes:"",rawHours:"",ampm:"am",minutesInvalid:!1,hoursInvalid:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.mass.configurationId.length<1&&this.props.configList&&this.props.configList.length>0&&(this.props.mass.configurationId=this.props.configList[0]._id)}},{key:"getSelect",value:function(){var e=this;return this.props.configList?Object(a.jsx)(m.a.Control,{as:"select",value:this.props.mass.configurationId,onChange:function(t){return e.props.setConfig(t.target.value)},children:this.props.configList.map((function(e){return Object(a.jsx)("option",{value:e._id,children:e.name},e._id)}))}):Object(a.jsxs)("div",{children:["Loading configurations ",Object(a.jsx)(O.a,{animation:"border"})," "]})}},{key:"getHours",value:function(){return this.props.mass.date?this.props.mass.date.getHours():""}},{key:"getMinutes",value:function(){return this.props.mass.date?this.props.mass.date.getMinutes():""}},{key:"render",value:function(){var e=this;return this.props.successful?Object(a.jsxs)("div",{children:[Object(a.jsx)(ct.a,{variant:"success",children:"Mass created successfully."}),Object(a.jsx)(f.a,{onClick:function(){e.props.setDone()},children:"Done"})]}):Object(a.jsxs)(m.a,{onSubmit:this.onSubmit,children:[Object(a.jsx)(m.a.Text,{children:Object(a.jsx)("span",{style:{color:"red"},children:this.props.errorMessage})}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Mass Date"}),Object(a.jsx)("br",{}),Object(a.jsx)(X,{value:this.props.mass.date,onChange:function(t){return e.props.setDate(t)},required:!0})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Mass Time"}),Object(a.jsxs)(m.a.Row,{children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Control,{type:"text",style:{maxWidth:"100px"},value:this.state.rawHours,onChange:function(t){return e.setState({rawHours:t.target.value})},isInvalid:this.state.hoursInvalid}),Object(a.jsx)(m.a.Control.Feedback,{type:"invalid",children:"Invalid hour"})]}),Object(a.jsx)("span",{style:{fontSize:"30px",marginLeft:"5px",marginRight:"5px"},children:":"}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Control,{type:"text",style:{maxWidth:"100px"},value:this.state.rawMinutes,onChange:function(t){return e.setState({rawMinutes:t.target.value})},isInvalid:this.state.minutesInvalid}),Object(a.jsx)(m.a.Control.Feedback,{type:"invalid",children:"Invalid minute"})]}),Object(a.jsx)(m.a.Group,{children:Object(a.jsxs)(m.a.Control,{as:"select",value:this.state.ampm,onChange:function(t){return e.setState({ampm:t.target.value})},style:{marginLeft:"10px"},children:[Object(a.jsx)("option",{value:"am",children:"AM"}),Object(a.jsx)("option",{value:"pm",children:"PM"})]})})]})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Configuration"}),this.getSelect()]}),Object(a.jsx)(m.a.Group,{children:Object(a.jsx)(m.a.Check,{label:"Publish",checked:this.props.mass.published,onChange:function(){return e.props.setPublished()}})}),Object(a.jsx)(J,{type:"submit",loading:this.props.posting,children:"Save"})]})}}]),n}(r.a.Component),ft=Object(h.b)((function(e){return{mass:e.admin.massForm.mass,posting:e.admin.massForm.posting,errorMessage:e.admin.massForm.errorMessage,successful:e.admin.massForm.successful,configList:e.admin.config.configList}}),{saveMass:function(e){return function(t,n){t({type:ut}),C.post("/masses/",e,w(n)).then((function(){t({type:ot})})).catch((function(e){t({type:lt,payload:e.response.data.errorMessage})}))}},setDate:function(e){return{type:dt,payload:e}},setConfig:function(e){return{type:pt,payload:e}},setPublished:function(){return{type:jt}},loadConfigList:qe,setDone:function(){return{type:ht}}})(bt),Ot="WEEKLY_LIST_LOADED",mt="WEEKLY_LIST_ERROR",gt="WEEKLY_SELECTED",yt="WEEKLY_SAVING",xt="WEEKLY_SAVED",vt="WEEKLY_SAVE_ERROR",Ct="WEEKLY_BACK",Mt="WEEKLY_SET_DAY",Lt="WEEKLY_SET_HOUR",Et="WEEKLY_SET_MINUTE",St="WEEKLY_SET_CONFIG",kt="WEEKLY_SET_AMPM",wt="WEEKLY_DELETING",_t="WEEKLY_SET_DELETED",It="WEEKLY_DELETE_ERROR",Nt="WEEKLY_RES_SELECT",Rt="WEEKLY_SET_FIRST",Dt="WEEKLY_SET_LAST",At="WEEKLY_SELECT_SEAT",Tt="WEEKLY_CLOSE_SELECT",Ft="WEEKLY_SAVE_RESERVATION",Gt="WEEKLY_DELETE_RESERVATION",Ht=function(e){return{type:Ot,payload:e}},Wt=function(e){return{type:vt,payload:e}},Kt=function(e){return{type:wt,payload:e._id}},Bt=function(e){return{type:_t,payload:e._id}},Pt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],zt=["January","February","March","April","May","June","July","August","September","October","November","December"],Yt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadList()}},{key:"getTitle",value:function(e){var t=e.minute.toString();t=t.length>1?t:"0"+t;var n=e.hour>=12?"PM":"AM",a=e.hour>=12?e.hour-12:e.hour;return"".concat(Pt[e.day]," at ").concat(a,":").concat(t," ").concat(n)}},{key:"getButtonContents",value:function(e){var t=this;return this.props.deleting===e._id?Object(a.jsx)(O.a,{animation:"border"}):Object(a.jsx)(f.a,{variant:"info",onClick:function(){return t.props.deleteItem(e)},children:Object(a.jsx)(st.b,{})})}},{key:"render",value:function(){var e=this;return this.props.listError?Object(a.jsx)("h3",{children:"Failed to load weekly masses"}):this.props.list?Object(a.jsxs)("div",{style:{marginRight:"15px"},children:[Object(a.jsx)("h3",{children:"Weekly Masses"}),Object(a.jsx)(at.a,{children:this.props.list.map((function(t){return Object(a.jsxs)(at.a.Item,{children:[Object(a.jsx)("h4",{children:e.getTitle(t)}),Object(a.jsx)(f.a,{variant:"info",style:{marginRight:"10px"},onClick:function(){return e.props.selectItem(t)},children:Object(a.jsx)(st.a,{})}),e.getButtonContents(t)]},t._id)}))}),Object(a.jsx)(f.a,{style:{marginTop:"15px"},onClick:function(){e.props.selectItem()},children:"Add Weekly Mass"})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Loading items"}),Object(a.jsx)(O.a,{animation:"border"})]})}}]),n}(r.a.Component),Vt=Object(h.b)((function(e){return{list:e.admin.weeklyMassForm.list,listError:e.admin.weeklyMassForm.listError,deleting:e.admin.weeklyMassForm.deleting}}),{loadList:function(){return function(e,t){C.get("/weeklymass/",w(t)).then((function(t){e(Ht(t.data))})).catch((function(){e({type:mt})}))}},selectItem:function(e){return{type:gt,payload:e}},deleteItem:function(e){return function(t,n){t(Kt(e)),C.delete("/weeklymass/".concat(e._id),w(n)).then((function(){t(Bt(e))})).catch((function(){t({type:It})}))}}})(Yt),Ut=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(x.a,{size:"lg",show:this.props.visible,onHide:function(){return e.props.closeSelect()},children:[Object(a.jsx)(x.a.Header,{children:Object(a.jsx)(x.a.Title,{children:"Create Recurring Reservation"})}),Object(a.jsxs)(x.a.Body,{children:[Object(a.jsxs)(m.a,{children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"First name"}),Object(a.jsx)(m.a.Control,{type:"text",value:this.props.firstName,onChange:function(t){return e.props.setFirstName(t.target.value)},isInvalid:this.props.firstInvalid}),Object(a.jsx)(m.a.Control.Feedback,{type:"invalid",children:"Invalid first name"})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Last Name"}),Object(a.jsx)(m.a.Control,{type:"text",value:this.props.lastName,onChange:function(t){return e.props.setLastName(t.target.value)},isInvalid:this.props.lastInvalid}),Object(a.jsx)(m.a.Control.Feedback,{type:"invalid",children:"Invalid last name"})]})]}),Object(a.jsx)(de,{seats:this.props.seatMap,seatClicked:function(t){return e.props.selectSeat(t)}})]}),Object(a.jsxs)(x.a.Footer,{children:[Object(a.jsx)(f.a,{disabled:this.props.seats.length<1,onClick:function(){return e.props.saveReservation()},children:"Save"}),Object(a.jsx)(f.a,{onClick:function(){return e.props.closeSelect()},children:"Cancel"})]})]})}}]),n}(r.a.Component),Jt=Object(h.b)((function(e){return{firstName:e.admin.weeklyMassForm.selection.firstName,lastName:e.admin.weeklyMassForm.selection.lastName,seatMap:e.admin.weeklyMassForm.selection.seatMap,seats:e.admin.weeklyMassForm.selection.seats,visible:e.admin.weeklyMassForm.selection.modalVisible,firstInvalid:e.admin.weeklyMassForm.selection.firstInvalid,lastInvalid:e.admin.weeklyMassForm.selection.lastInvalid}}),{setFirstName:function(e){return{type:Rt,payload:e}},setLastName:function(e){return{type:Dt,payload:e}},selectSeat:function(e){return{type:At,payload:e}},closeSelect:function(){return{type:Tt}},saveReservation:function(e){return{type:Ft,payload:e}}})(Ut),qt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).onSubmit=function(t){t.preventDefault(),e.props.saveItem()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.configList&&this.props.configList.length>0&&(this.props.entry.configurationId.length<1?this.props.setConfig(this.props.configList[0]):this.props.setConfig(this.props.configList.find((function(t){return t._id===e.props.entry.configurationId}))))}},{key:"render",value:function(){var e,t=this;return this.props.success?Object(a.jsxs)("div",{children:[Object(a.jsx)(ct.a,{variant:"success",children:"Weekly mass saved successfully"}),Object(a.jsx)(f.a,{style:{marginTop:"20px"},onClick:function(){return t.props.goBack()},children:"Done"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Jt,{}),Object(a.jsxs)(m.a,{style:{marginRight:"15px"},onSubmit:this.onSubmit,children:[Object(a.jsx)("h3",{children:"Edit Weekly Mass"}),Object(a.jsxs)(m.a.Row,{children:[Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Day"}),Object(a.jsx)(m.a.Control,{as:"select",value:this.props.entry.day,onChange:function(e){return t.props.setDay(e.target.value)},children:Pt.map((function(e,t){return Object(a.jsx)("option",{value:t,children:e},e)}))})]}),Object(a.jsxs)(m.a.Group,{style:{marginLeft:"15px"},children:[Object(a.jsx)(m.a.Label,{children:"Hour"}),Object(a.jsx)(m.a.Control,{type:"text",onChange:function(e){return t.props.setHour(e.target.value)},value:this.props.rawHour,isInvalid:this.props.hourInvalid}),Object(a.jsx)(m.a.Control.Feedback,{type:"invalid",children:"Invalid hour"})]}),Object(a.jsxs)(m.a.Group,{style:{marginLeft:"15px"},children:[Object(a.jsx)(m.a.Label,{children:"Minute"}),Object(a.jsx)(m.a.Control,{type:"text",value:this.props.rawMinute,onChange:function(e){return t.props.setMinute(e.target.value)},isInvalid:this.props.minuteInvalid}),Object(a.jsx)(m.a.Control.Feedback,{type:"invalid",children:"Invalid minute"})]}),Object(a.jsxs)(m.a.Group,{style:{marginLeft:"15px"},children:[Object(a.jsx)(m.a.Label,{children:"AM/PM"}),Object(a.jsxs)(m.a.Control,{as:"select",value:this.props.pm,onChange:function(e){return t.props.setPM(e.target.value)},children:[Object(a.jsx)("option",{value:!1,children:"AM"}),Object(a.jsx)("option",{value:!0,children:"PM"})]})]})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Configuration"}),Object(a.jsx)(m.a.Control,{as:"select",value:this.props.entry.configurationId,onChange:function(e){console.log("new val: "+e.target.value),t.props.setConfig(t.props.configList.find((function(t){return t._id===e.target.value})))},isInvalid:this.props.configInvalid,children:null===(e=this.props.configList)||void 0===e?void 0:e.map((function(e){return Object(a.jsx)("option",{value:e._id,children:e.name},e._id)}))}),Object(a.jsx)(m.a.Control.Feedback,{type:"invalid",children:"This configuration conflicts with at least one of your recurring reservations"})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Recurring Reservations"}),Object(a.jsx)(at.a,{children:this.props.entry.recurringReservations.map((function(e,n){return Object(a.jsxs)(at.a.Item,{children:[e.lastName,", ",e.firstName," (",e.seats.length," seats)",Object(a.jsx)(f.a,{variant:"info",className:"pull-right",style:{marginLeft:"10px"},onClick:function(){return t.props.deleteReservation(n)},children:Object(a.jsx)(st.b,{})})]},e.seats.toString())}))}),Object(a.jsx)(f.a,{style:{marginTop:"8px"},onClick:function(){return t.props.newReservation(t.props.configList.find((function(e){return e._id===t.props.entry.configurationId})))},children:"Add"})]}),Object(a.jsx)(J,{style:{marginRight:"10px"},loading:this.props.saving,type:"submit",children:"Save"}),Object(a.jsx)(f.a,{onClick:function(){return t.props.goBack()},children:"Cancel"})]})]})}}]),n}(r.a.Component),Qt=Object(h.b)((function(e){return{entry:e.admin.weeklyMassForm.selected,errorMessage:e.admin.weeklyMassForm.errorMessage,saving:e.admin.weeklyMassForm.saving,configList:e.admin.config.configList,hourInvalid:e.admin.weeklyMassForm.hourInvalid,minuteInvalid:e.admin.weeklyMassForm.minuteInvalid,configInvalid:e.admin.weeklyMassForm.configInvalid,rawHour:e.admin.weeklyMassForm.rawHour,rawMinute:e.admin.weeklyMassForm.rawMinute,pm:e.admin.weeklyMassForm.pm,success:e.admin.weeklyMassForm.saved}}),{saveItem:function(){return function(e,t){if(e({type:yt}),t().admin.weeklyMassForm.saving){var n=t().admin.weeklyMassForm.selected;console.log(n),n._id&&(n.id=n._id),C.post("/weeklymass",n,w(t)).then((function(){e({type:xt})})).catch((function(t){e(Wt(t.response.data.errorMessage))}))}}},goBack:function(){return{type:Ct}},setDay:function(e){return{type:Mt,payload:e}},setHour:function(e){return{type:Lt,payload:e}},setMinute:function(e){return{type:Et,payload:e}},setConfig:function(e){return console.log(e),{type:St,payload:e}},setPM:function(e){return{type:kt,payload:e}},newReservation:function(e){return{type:Nt,payload:e}},deleteReservation:function(e){return{type:Gt,payload:e}}})(qt),Xt=n(145),Zt=n(33),$t="DASHBOARD_LOADED",en="DASHBOARD_LOAD_ERROR",tn=function(e){return{type:$t,payload:e}},nn=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadMassList()}},{key:"render",value:function(){var e=this;if(this.props.error)return Object(a.jsx)("h2",{children:"Failed to load dashboard"});if(this.props.totals){var t=Object.keys(this.props.totals).map((function(t){return{mass:t,reservations:e.props.totals[t]}}));return Object(a.jsxs)(Xt.c,{data:t,children:[Object(a.jsx)(Xt.a,{}),Object(a.jsx)(Xt.e,{max:100}),Object(a.jsx)(Xt.b,{valueField:"reservations",argumentField:"mass"}),Object(a.jsx)(Xt.d,{text:"Active Reservations"}),Object(a.jsx)(Zt.a,{})]})}return Object(a.jsxs)(g.a,{children:[Object(a.jsx)("h3",{style:{marginRight:"10px",marginLeft:"15px"},children:"Loading dashboard"}),Object(a.jsx)(O.a,{animation:"border"})]})}}]),n}(r.a.Component),an=Object(h.b)((function(e){return{totals:e.admin.dashboard.totals,error:e.admin.dashboard.error}}),{loadMassList:function(){return function(e,t){C.get("/masses",w(t)).then((function(t){var n=t.data.map((function(e){return e.date=new Date(e.date),e}));e(tn(n))})).catch((function(t){console.log(t),e({type:en})}))}}})(nn),sn=n(746),rn=n(386),cn=n(141),on=n(387),ln=(n(729),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.labels,t=this.props.components;return Object(a.jsx)(sn.a.Container,{id:"left-tabs-example",defaultActiveKey:e[0],children:Object(a.jsxs)(g.a,{style:{marginTop:"10px",marginLeft:"0px"},children:[Object(a.jsx)(ce.a,{sm:3,style:{marginLeft:"-15px"},children:Object(a.jsxs)(te.a,{variant:"pills",children:[Object(a.jsx)(te.a.Item,{children:Object(a.jsxs)(te.a.Link,{eventKey:"Dashboard",children:[Object(a.jsx)(rn.a,{style:{fontSize:"25px",marginRight:"10px"}}),"Dashboard"]})}),Object(a.jsx)(te.a.Item,{children:Object(a.jsxs)(te.a.Link,{eventKey:"Configurations",children:[Object(a.jsx)(cn.c,{style:{fontSize:"25px",marginRight:"10px"}}),"Configurations"]})}),Object(a.jsx)(te.a.Item,{children:Object(a.jsxs)(te.a.Link,{eventKey:"Create mass",children:[Object(a.jsx)(cn.b,{style:{fontSize:"25px",marginRight:"10px"}}),"Create mass"]})}),Object(a.jsx)(te.a.Item,{children:Object(a.jsxs)(te.a.Link,{eventKey:"Weekly masses",children:[Object(a.jsx)(cn.a,{style:{fontSize:"25px",marginRight:"10px"}}),"Weekly masses"]})}),Object(a.jsx)(te.a.Item,{children:Object(a.jsxs)(te.a.Link,{eventKey:"Accounts",children:[Object(a.jsx)(on.a,{style:{fontSize:"25px",marginRight:"10px"}}),"Accounts"]})})]})}),Object(a.jsx)(ce.a,{sm:9,children:Object(a.jsx)(sn.a.Content,{children:t.map((function(t,n){return Object(a.jsx)(sn.a.Pane,{eventKey:e[n],children:t()},e[n])}))})})]})})}}]),n}(r.a.Component)),un=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).dashboard=function(){return Object(a.jsx)(an,{})},e.createMass=function(){return Object(a.jsx)(ft,{})},e.configs=function(){return e.props.selectedConfig?Object(a.jsx)(nt,{}):Object(a.jsx)(it,{})},e.weeklyMasses=function(){return e.props.selectedWeekly?Object(a.jsx)(Qt,{}):Object(a.jsx)(Vt,{})},e.accounts=function(){return Object(a.jsx)("div",{children:"Manage accounts"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=[this.dashboard,this.configs,this.createMass,this.weeklyMasses,this.accounts];return this.props.authorized?Object(a.jsx)(ln,{labels:["Dashboard","Configurations","Create mass","Weekly masses","Accounts"],components:e}):Object(a.jsxs)("h3",{style:{marginLeft:"25px"},children:[Object(a.jsx)("a",{href:"/login",children:"Login"})," to view this page"]})}}]),n}(r.a.Component),dn=Object(h.b)((function(e){return{authorized:e.auth.isAuthenticated,selectedConfig:e.admin.config.selectedConfig,selectedWeekly:e.admin.weeklyMassForm.selected}}))(un),pn=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:""},e.onSubmit=function(t){t.preventDefault(),e.props.loginUser({username:e.state.username,password:e.state.password})},e}return Object(l.a)(n,[{key:"usernameChanged",value:function(e){this.setState({username:e})}},{key:"passwordChanged",value:function(e){this.setState({password:e})}},{key:"render",value:function(){var e=this;return null!==this.props.auth.user?Object(a.jsx)(j.a,{to:"/"}):Object(a.jsx)(le.a,{children:Object(a.jsx)(g.a,{style:{justifyContent:"center"},children:Object(a.jsxs)(ce.a,{md:6,children:[Object(a.jsx)("h3",{children:"Admin Login"}),Object(a.jsxs)(m.a,{onSubmit:this.onSubmit,children:[Object(a.jsx)(m.a.Text,{children:Object(a.jsx)("span",{style:{color:"red"},children:this.props.auth.errorMessage})}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Username"}),Object(a.jsx)(m.a.Control,{type:"text",onChange:function(t){return e.usernameChanged(t.target.value)}})]}),Object(a.jsxs)(m.a.Group,{children:[Object(a.jsx)(m.a.Label,{children:"Password"}),Object(a.jsx)(m.a.Control,{type:"password",onChange:function(t){return e.passwordChanged(t.target.value)}})]}),Object(a.jsx)(J,{type:"submit",loading:this.props.auth.loading,children:"Login"})]})]})})})}}]),n}(r.a.Component),jn=Object(h.b)((function(e){return{auth:e.auth}}),{loginUser:function(e){return function(t){C.post("/auth/login",e).then((function(e){var n=e.data.token;localStorage.setItem("jwtToken",n);var a=Object(M.a)(n);t(k(a,n))})).catch((function(e){t({type:E,payload:e.response.data.errorMessage})}))}}})(pn),hn=n(752),bn="MASS_LOADED",fn="MASS_ERROR",On="CANCELING",mn="CANCEL_PENDING",gn="CANCEL_CANCELED",yn="CANCELLED",xn="CANCEL_FAILED",vn=function(e){return{type:bn,payload:e}},Cn=function(e){return{type:On,payload:e}},Mn=function(e){return{type:yn,payload:e}},Ln=je.d.create({page:{flexDirection:"row",backgroundColor:"#E4E4E4"},section:{margin:10,padding:10,flexGrow:1}}),En=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={selectedReservation:null},e.selectSeat=function(t){var n=e.props.mass.reservations.find((function(e){return e.seats.includes(t)}));e.setState({selectedReservation:n})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadMass(this.props.match.params.id)}},{key:"getDocument",value:function(){var e=this,t=this.props.mass.reservations.slice();return t.sort((function(e,t){return e.lastName>t.lastName})),t.push({seats:this.props.seatMap.map((function(e,t){return t})).filter((function(t){return"available"===e.props.seatMap[t]})).sort((function(e,t){return e-t})),firstName:"Walk",lastName:"In"}),Object(a.jsx)(je.a,{children:Object(a.jsx)(je.c,{size:"A4",style:{paddingVertical:"8mm"},children:Object(a.jsxs)(je.f,{style:Ln.section,children:[Object(a.jsx)(je.e,{style:{textAlign:"center",fontSize:"6.5mm"},children:"Reservation List"}),t.map((function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(je.e,{style:{fontSize:"5mm",fontWeight:"semibold",marginBottom:"1mm",marginTop:"3mm"},children:[e.lastName,",",e.firstName]}),me(e.seats)]})}))]})})})}},{key:"getList",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(x.a,{size:"sm",onHide:function(){return e.props.setCancelCanceled()},show:null!==this.props.staged,children:[Object(a.jsx)(x.a.Header,{children:Object(a.jsx)(x.a.Title,{children:"Are you sure you want to cancel this reservation?"})}),Object(a.jsxs)(x.a.Footer,{children:[Object(a.jsx)(f.a,{onClick:function(){return e.props.cancelReservation(e.props.mass,e.props.staged)},style:{marginRight:"18px"},children:"Yes"}),Object(a.jsx)(f.a,{onClick:function(){return e.props.setCancelCanceled()},children:"No"})]})]}),Object(a.jsx)(at.a,{style:{marginTop:"8px"},children:this.props.mass.reservations.map((function(t){return Object(a.jsxs)(at.a.Item,{style:{marginLeft:"12px",marginRight:"12px"},children:[Object(a.jsxs)("h4",{style:{color:"#2da65d"},children:[t.lastName,", ",t.firstName]}),Object(a.jsx)(J,{style:{marginLeft:"20px",maxHeight:"35px",float:"right"},variant:"info",loading:e.props.canceling===t._id,onClick:function(){e.props.setCancelPending(t),e.setState({selectedReservation:null})},children:"Cancel"}),Oe(t.seats)]},t._id)}))})]})}},{key:"getReservationCard",value:function(){var e,t=this.state.selectedReservation?this.state.selectedReservation.lastName+", "+this.state.selectedReservation.firstName:"No reservation selected";return Object(a.jsx)(y.a,{children:Object(a.jsxs)(y.a.Body,{children:[Object(a.jsx)(y.a.Title,{children:t}),Object(a.jsx)(y.a.Text,{children:Oe(null===(e=this.state.selectedReservation)||void 0===e?void 0:e.seats)})]})})}},{key:"render",value:function(){if(!this.props.authorized)return Object(a.jsx)("div",{style:{marginTop:"5px",marginLeft:"5px"},children:Object(a.jsxs)("h3",{children:["Please ",Object(a.jsx)("a",{href:"/login",children:"login"})," to view this page"]})});if(this.props.error)return Object(a.jsx)("h3",{children:"Failed to load mass view"});if(null===this.props.mass)return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Loading mass"}),Object(a.jsx)(O.a,{animation:"border"})]});var e=Pt[this.props.mass.date.getDay()],t=zt[this.props.mass.date.getMonth()],n=this.props.mass.date.getDate(),s=this.props.mass.date.getHours(),r=this.props.mass.date.getMinutes()<10?"0"+this.props.mass.date.getMinutes():this.props.mass.date.getMinutes(),i=s>=12?"PM":"AM";s=s>12?s-12:s;var c="SeatList_".concat(e,"_").concat(t,"_").concat(n,"_").concat(s,"_").concat(r,"_").concat(i,".pdf");return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h3",{style:{marginTop:"3px",marginBottom:"6px",marginLeft:"4px"},children:U(this.props.mass)}),Object(a.jsxs)(hn.a,{defaultActiveKey:"list",children:[Object(a.jsxs)(sn.a,{eventKey:"list",title:"Reservation List",children:[Object(a.jsx)(je.b,{document:this.getDocument(),fileName:c,style:{marginLeft:"12px",fontSize:"17px"},children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Download List"}}),this.getList()]}),Object(a.jsxs)(sn.a,{eventKey:"map",title:"Seat Map",children:[Object(a.jsx)(le.a,{children:Object(a.jsx)(de,{seats:this.props.seatMap,seatClicked:this.selectSeat,seatMouseOver:function(){},selectedReservation:this.state.selectedReservation})}),this.getReservationCard()]})]})]})}}]),n}(r.a.Component),Sn=Object(h.b)((function(e){return{mass:e.massView.mass,canceling:e.massView.canceling,error:e.massView.error,seatMap:e.massView.seatMap,authorized:e.auth.isAuthenticated,staged:e.massView.staged}}),{loadMass:function(e){return function(t,n){C.get("/masses/".concat(e),w(n)).then((function(e){var n=e.data;n.date=new Date(n.date),t(vn(n))})).catch((function(){t({type:fn})}))}},cancelReservation:function(e,t){return function(n,a){n(Cn(t)),C.delete("/masses/".concat(e._id,"/").concat(t._id),w(a)).then((function(){n(Mn(t))})).catch((function(){n({type:xn})}))}},setCancelPending:function(e){return{type:mn,payload:e}},setCancelCanceled:function(){return{type:gn}}})(En),kn=n(105),wn=n(388),_n={massList:null,error:!1,publishing:null,deleting:null,displayDeleteModal:!1,filter:{startDate:new Date,published:!1}},In=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n,t=arguments.length>1?arguments[1]:void 0;return t.type===_?Object(b.a)(Object(b.a)({},e),{},{massList:t.payload,error:!1}):t.type===I?Object(b.a)(Object(b.a)({},e),{},{error:!0}):t.type===R?Object(b.a)(Object(b.a)({},e),{},{massList:e.massList.map((function(e){return e._id===t.payload&&(e.published=!e.published),e})),error:!1,publishing:null}):t.type===D?Object(b.a)(Object(b.a)({},e),{},{publishing:null}):t.type===N?Object(b.a)(Object(b.a)({},e),{},{pubishing:t.payload}):t.type===G?Object(b.a)(Object(b.a)({},e),{},{displayDeleteModal:!0,deleting:t.payload}):t.type===H?Object(b.a)(Object(b.a)({},e),{},{displayDeleteModal:!1,deleting:!1}):t.type===A?Object(b.a)(Object(b.a)({},e),{},{displayDeleteModal:!1}):t.type===F?(console.log("delete error"),Object(b.a)(Object(b.a)({},e),{},{deleting:null})):t.type===T?Object(b.a)(Object(b.a)({},e),{},{deleting:null,massList:e.massList.filter((function(e){return e._id!==t.payload}))}):t.type===W?Object(b.a)(Object(b.a)({},e),{},{filter:t.payload}):e},Nn={mass:null,seats:null,errorMessage:null,stage:"selection",postError:null,posting:!1},Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn,t=arguments.length>1?arguments[1]:void 0;if(t.type===ve)return Object(b.a)(Object(b.a)({},e),{},{mass:t.payload,seats:xe(t.payload)});if(t.type===Ce)return Object(b.a)(Object(b.a)({},e),{},{errorMessage:t.payload});if(t.type===ke){var n=e.seats.slice();return"available"===n[t.payload]?n[t.payload]="selected":"selected"===n[t.payload]&&(n[t.payload]="available"),Object(b.a)(Object(b.a)({},e),{},{seats:n})}return t.type===Le?Object(b.a)(Object(b.a)({},e),{},{stage:"input"}):t.type===we?Object(b.a)(Object(b.a)({},e),{},{stage:"selection"}):t.type===Me?Object(b.a)(Object(b.a)({},e),{},{postError:t.payload,posting:!1}):t.type===Se?Object(b.a)(Object(b.a)({},e),{},{stage:"receipt",posting:!1}):t.type===Ee?Object(b.a)(Object(b.a)({},e),{},{posting:!0}):e},Dn={token:localStorage.getItem("jwtToken"),isAuthenticated:null,user:null,loading:!1,errorMessage:null},An=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dn,t=arguments.length>1?arguments[1]:void 0;return t.type===L?{token:t.payload.token,isAuthenticated:!0,user:t.payload.user}:t.type===E?{token:null,user:null,isAuthenticated:!1,loading:!1,errorMessage:t.payload}:t.type===S?(localStorage.removeItem("jwtToken"),{token:null,user:null,isAuthenticated:!1,loading:!1}):e},Tn=n(124),Fn=function(e,t){if(t.type===Ge)return Object(b.a)(Object(b.a)({},e),{},{configList:t.payload});if(t.type===He){t.payload||(t.payload={name:"",seats:[],rows:[]});var n,a=fe(),s=Object(pe.a)(t.payload.seats);try{for(s.s();!(n=s.n()).done;){a[n.value]="unavailable"}}catch(g){s.e(g)}finally{s.f()}var r,i=Object(pe.a)(t.payload.rows);try{for(i.s();!(r=i.n()).done;)for(var c=r.value,o=0;o<a.length;o++)Math.floor(o/be)===c&&(a[o]="unavailable")}catch(g){i.e(g)}finally{i.f()}return Object(b.a)(Object(b.a)({},e),{},{selectedConfig:t.payload,seatMap:a,posting:!1,errorMessage:null})}if(t.type===We)return Object(b.a)(Object(b.a)({},e),{},{selectedConfig:null,errorMessage:null});if(t.type===ze){if("available"===e.seatMap[t.payload]){var l=e.seatMap.slice();return l[t.payload]="unavailable",Object(b.a)(Object(b.a)({},e),{},{selectedConfig:Object(b.a)(Object(b.a)({},e.selectedConfig),{},{seats:[].concat(Object(Tn.a)(e.selectedConfig.seats),[t.payload])}),seatMap:l})}var u=e.seatMap.slice();u[t.payload]="available";var d=e.selectedConfig.seats.filter((function(e){return e!==t.payload}));return Object(b.a)(Object(b.a)({},e),{},{selectedConfig:Object(b.a)(Object(b.a)({},e.selectedConfig),{},{seats:d}),seatMap:u})}if(t.type===Ye){if("available"===e.seatMap[t.payload]){for(var p=e.seatMap.slice(),j=Math.floor(t.payload/be),h=0;h<p.length;h++)Math.floor(h/be)===j&&(p[h]="unavailable");return Object(b.a)(Object(b.a)({},e),{},{selectedConfig:Object(b.a)(Object(b.a)({},e.selectedConfig),{},{rows:[].concat(Object(Tn.a)(e.selectedConfig.rows),[j])}),seatMap:p})}for(var f=e.seatMap.slice(),O=Math.floor(t.payload/be),m=0;m<f.length;m++)Math.floor(m/be)===O&&(e.selectedConfig.seats.includes(m)||(f[m]="available"));return Object(b.a)(Object(b.a)({},e),{},{selectedConfig:Object(b.a)(Object(b.a)({},e.selectedConfig),{},{rows:e.selectedConfig.rows.filter((function(e){return e!==O}))}),seatMap:f})}return t.type===Ke?Object(b.a)(Object(b.a)({},e),{},{posting:!0}):t.type===Be?Object(b.a)(Object(b.a)({},e),{},{selectedConfig:null,posting:!1}):t.type===Pe?Object(b.a)(Object(b.a)({},e),{},{errorMessage:t.payload,posting:!1}):t.type===Ve?Object(b.a)(Object(b.a)({},e),{},{selectedConfig:Object(b.a)(Object(b.a)({},e.selectedConfig),{},{name:t.payload})}):t.type===Ue?Object(b.a)(Object(b.a)({},e),{},{deleting:t.payload}):t.type===Je?Object(b.a)(Object(b.a)({},e),{},{deleting:!1,configList:e.configList.filter((function(e){return e._id!==t.payload}))}):e},Gn={mass:{date:null,published:!1,configurationId:""},posting:!1,errorMessage:null,successful:!1},Hn=function(e,t){return t.type===ut?Object(b.a)(Object(b.a)({},e),{},{posting:!0}):t.type===lt?Object(b.a)(Object(b.a)({},e),{},{posting:!1,errorMessage:t.payload}):t.type===ot?Object(b.a)(Object(b.a)({},Gn),{},{successful:!0}):t.type===dt?Object(b.a)(Object(b.a)({},e),{},{mass:Object(b.a)(Object(b.a)({},e.mass),{},{date:t.payload})}):t.type===pt?Object(b.a)(Object(b.a)({},e),{},{mass:Object(b.a)(Object(b.a)({},e.mass),{},{configurationId:t.payload})}):t.type===jt?Object(b.a)(Object(b.a)({},e),{},{mass:Object(b.a)(Object(b.a)({},e.mass),{},{published:!e.mass.published})}):t.type===ht?Object(b.a)(Object(b.a)({},e),{},{successful:!1}):e},Wn={list:null,listError:!1,selected:null,saving:!1,deleting:null,saved:!1,errorMessage:null,hourInvalid:!1,minuteInvalid:!1,configInvalid:!1,rawHour:"",rawMinute:"",pm:!1,success:!1,selection:{firstName:"",lastName:"",seats:[],seatMap:fe(),deleting:null,saving:!1,modalVisible:!1,firstInvalid:!1,lastInvalid:!1,config:null,configurationId:""}},Kn=function(e,t){if(t.type===Ot)return Object(b.a)(Object(b.a)({},e),{},{list:t.payload});if(t.type===mt)return Object(b.a)(Object(b.a)({},e),{},{list:null,listError:!0});if(t.type===gt){t.payload||(t.payload={day:0,hour:1,minute:0,configurationId:"",recurringReservations:[]});var n=t.payload.minute.toString();return n=n.length>1?n:"0"+n,Object(b.a)(Object(b.a)({},e),{},{selected:t.payload,pm:t.payload.hour>=12,rawHour:(t.payload.hour>12?t.payload.hour-12:t.payload.hour).toString(),rawMinute:n,saved:!1})}if(t.type===yt){var a,s=parseInt(e.rawHour),r=parseInt(e.rawMinute),i=!isNaN(s)&&s>0&&s<=12,c=!isNaN(r)&&r>=0&&r<60,o=!0,l=Object(pe.a)(e.selected.recurringReservations);try{for(l.s();!(a=l.n()).done;){var u,d=a.value,p=Object(pe.a)(d.seats);try{for(p.s();!(u=p.n()).done;){var j=u.value;(e.selection.config.seats.includes(j)||e.selection.config.rows.includes(Math.floor(j/be)))&&(o=!1)}}catch(x){p.e(x)}finally{p.f()}}}catch(x){l.e(x)}finally{l.f()}var h=i&&c&&o;return h&&(e.selected.hour=s,e.selected.minute=r,e.pm&&12!==s&&(e.selected.hour+=12)),Object(b.a)(Object(b.a)({},e),{},{hourInvalid:!i,minuteInvalid:!c,configInvalid:!o,saving:h,success:!1})}if(t.type===xt)return Object(b.a)(Object(b.a)({},e),{},{saving:!1,saved:!0});if(t.type===vt)return Object(b.a)(Object(b.a)({},e),{},{saving:!1,errorMessage:t.payload});if(t.type===Ct)return Object(b.a)(Object(b.a)({},e),{},{selected:null});if(t.type===Mt)return Object(b.a)(Object(b.a)({},e),{},{selected:Object(b.a)(Object(b.a)({},e.selected),{},{day:t.payload})});if(t.type===Lt)return Object(b.a)(Object(b.a)({},e),{},{rawHour:t.payload});if(t.type===Et)return Object(b.a)(Object(b.a)({},e),{},{rawMinute:t.payload});if(t.type===St)return Object(b.a)(Object(b.a)({},e),{},{selected:Object(b.a)(Object(b.a)({},e.selected),{},{configurationId:t.payload._id}),selection:Object(b.a)(Object(b.a)({},e.selection),{},{config:t.payload})});if(t.type===kt)return Object(b.a)(Object(b.a)({},e),{},{pm:t.payload});if(t.type===wt)return Object(b.a)(Object(b.a)({},e),{},{deleting:t.payload});if(t.type===_t)return Object(b.a)(Object(b.a)({},e),{},{list:e.list.filter((function(e){return e._id!==t.payload})),deleting:null});if(t.type===It)return Object(b.a)(Object(b.a)({},e),{},{deleting:null});if(t.type===Nt){var f=xe({reservations:Object(Tn.a)(e.selected.recurringReservations),configuration:e.selection.config});return Object(b.a)(Object(b.a)({},e),{},{selection:{firstName:"",lastName:"",seats:[],seatMap:f,modalVisible:!0,firstInvalid:!1,lastInvalid:!1,config:e.selection.config}})}if(t.type===Rt)return Object(b.a)(Object(b.a)({},e),{},{selection:Object(b.a)(Object(b.a)({},e.selection),{},{firstName:t.payload})});if(t.type===Dt)return Object(b.a)(Object(b.a)({},e),{},{selection:Object(b.a)(Object(b.a)({},e.selection),{},{lastName:t.payload})});if(t.type===At){if("available"===e.selection.seatMap[t.payload]){var O=e.selection.seatMap.slice();return O[t.payload]="selected",Object(b.a)(Object(b.a)({},e),{},{selection:Object(b.a)(Object(b.a)({},e.selection),{},{seats:[].concat(Object(Tn.a)(e.selection.seats),[t.payload]),seatMap:O})})}if("selected"===e.selection.seatMap[t.payload]){var m=e.selection.seatMap.slice();return m[t.payload]="available",Object(b.a)(Object(b.a)({},e),{},{selection:Object(b.a)(Object(b.a)({},e.selection),{},{seats:e.selection.seats.filter((function(e){return e!==t.payload})),seatMap:m})})}}else{if(t.type===Tt)return Object(b.a)(Object(b.a)({},e),{},{selection:Object(b.a)(Object(b.a)({},e.selection),{},{modalVisible:!1})});if(t.type===Ft){var g=e.selection.firstName.length>0,y=e.selection.lastName.length>0;return g&&y?Object(b.a)(Object(b.a)({},e),{},{selected:Object(b.a)(Object(b.a)({},e.selected),{},{recurringReservations:[].concat(Object(Tn.a)(e.selected.recurringReservations),[{firstName:e.selection.firstName,lastName:e.selection.lastName,seats:e.selection.seats}])}),selection:Object(b.a)(Object(b.a)({},e.selection),{},{modalVisible:!1})}):Object(b.a)(Object(b.a)({},e),{},{selection:Object(b.a)(Object(b.a)({},e.selection),{},{firstInvalid:!g,lastInvalid:!y})})}if(t.type===Gt)return Object(b.a)(Object(b.a)({},e),{},{selected:Object(b.a)(Object(b.a)({},e.selected),{},{recurringReservations:e.selected.recurringReservations.filter((function(e,n){return n!==t.payload}))})})}return e},Bn=function(e,t){if(t.type===$t){var n,a={},s=Object(pe.a)(t.payload.filter((function(e){return e.date>new Date})));try{for(s.s();!(n=s.n()).done;){var r=n.value,i=r.reservations.reduce((function(e,t){return e+t.seats.length}),0),c=Pt[r.date.getDay()],o=r.date.getHours(),l=r.date.getMinutes().toString(),u=o>=12?"PM":"AM";o>12&&(o-=12),l.length<2&&(l="0"+l);var d="".concat(c," ").concat(o,":").concat(l," ").concat(u);d in a?a[d]+=i:a[d]=i}}catch(p){s.e(p)}finally{s.f()}return Object(b.a)(Object(b.a)({},e),{},{totals:a})}return t.type===en?Object(b.a)(Object(b.a)({},e),{},{error:!0}):e},Pn={config:{configList:null,selectedConfig:null,posting:!1,seatMap:null,errorMessage:null,deleting:null},massForm:Gn,weeklyMassForm:Wn,dashboard:{totals:null,error:!1}},zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn,t=arguments.length>1?arguments[1]:void 0;return t.type.startsWith("CONFIG")?Object(b.a)(Object(b.a)({},e),{},{config:Fn(e.config,t)}):t.type.startsWith("MASS")?Object(b.a)(Object(b.a)({},e),{},{massForm:Hn(e.massForm,t)}):t.type.startsWith("WEEKLY")?Object(b.a)(Object(b.a)({},e),{},{weeklyMassForm:Kn(e.weeklyMassForm,t)}):t.type.startsWith("DASHBOARD")?Object(b.a)(Object(b.a)({},e),{},{dashboard:Bn(e.dashboard,t)}):e},Yn={mass:null,canceling:null,error:!1,seatMap:null,staged:null},Vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yn,t=arguments.length>1?arguments[1]:void 0;if(t.type===bn)return Object(b.a)(Object(b.a)({},e),{},{error:!1,mass:t.payload,seatMap:xe(t.payload)});if(t.type===fn)return Object(b.a)(Object(b.a)({},e),{},{error:!0});if(t.type===On)return Object(b.a)(Object(b.a)({},e),{},{canceling:t.payload,staged:null});if(t.type===yn){var n=Object(b.a)(Object(b.a)({},e.mass),{},{reservations:e.mass.reservations.filter((function(e){return e._id!==t.payload._id}))});return{seatMap:xe(n),mass:n,canceling:null,staged:null}}return t.type===xn?Object(b.a)(Object(b.a)({},e),{},{canceling:null}):t.type===mn?Object(b.a)(Object(b.a)({},e),{},{staged:t.payload}):t.type===gn?Object(b.a)(Object(b.a)({},e),{},{staged:null}):e},Un=Object(kn.c)({massList:In,massView:Vn,mass:Rn,auth:An,admin:zn}),Jn=[wn.a],qn=Object(kn.e)(Un,{},Object(kn.d)(kn.a.apply(void 0,Jn))),Qn=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){qn.dispatch((function(e,t){C.get("/auth/user",w(t)).then((function(t){return e({type:L,payload:Object(b.a)(Object(b.a)({},t.data),{},{token:localStorage.getItem("jwtToken")})})})).catch((function(t){e({type:E})}))}))}},{key:"render",value:function(){return Object(a.jsx)(h.a,{store:qn,children:Object(a.jsxs)(p.a,{children:[Object(a.jsx)(ae,{}),Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{exact:!0,path:"/",component:ee}),Object(a.jsx)(j.b,{path:"/mass/:id",component:Te}),Object(a.jsx)(j.b,{exact:!0,path:"/info",component:Fe}),Object(a.jsx)(j.b,{exact:!0,path:"/login",component:jn}),Object(a.jsx)(j.b,{exact:!0,path:"/admin",component:dn}),Object(a.jsx)(j.b,{exact:!0,path:"/view/:id",component:Sn})]})]})})}}]),n}(r.a.Component);c.a.render(Object(a.jsx)(Qn,{}),document.querySelector("#root"))}},[[731,1,2]]]);
//# sourceMappingURL=main.cbcc1751.chunk.js.map